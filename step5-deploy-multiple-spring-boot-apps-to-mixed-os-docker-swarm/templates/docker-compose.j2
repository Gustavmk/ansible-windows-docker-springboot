#jinja2: newline_sequence:'\r\n'
version: '3.3'

services:

  zuul-edgeservice:
    build: ./zuul-edgeservice
    ports:
         - "8080:8080"
    environment:
        - SPRINGBOOT_APP_NAME=zuul-edgeservice
        - REGISTRY_HOST=eureka-serviceregistry
    tty:
      true
    restart:
      unless-stopped

  eureka-serviceregistry:
    build: ./eureka-serviceregistry
    ports:
         - "8761:8761"
    environment:
        - SPRINGBOOT_APP_NAME=eureka-serviceregistry
        - REGISTRY_HOST=eureka-serviceregistry-second
    tty:
      true
    restart:
      unless-stopped

  eureka-serviceregistry-second:
    build: ./eureka-serviceregistry-second
    ports:
         - "8761"
    environment:
        - SPRINGBOOT_APP_NAME=eureka-serviceregistry-second
        - REGISTRY_HOST=eureka-serviceregistry
    tty:
      true
    restart:
      unless-stopped

  weatherbackend:
    build: ./weatherbackend
    ports:
         - "8090"
    environment:
        - SPRINGBOOT_APP_NAME=weatherbackend
        - REGISTRY_HOST=eureka-serviceregistry-second
    tty:
      true
    restart:
      unless-stopped

  weatherservice:
    build: ./weatherservice
    ports:
         - "8095"
    environment:
        - SPRINGBOOT_APP_NAME=weatherservice
        - REGISTRY_HOST=eureka-serviceregistry
    tty:
      true
    restart:
      unless-stopped

networks:
 default:
  external:
   name: "nat"